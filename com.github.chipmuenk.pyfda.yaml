app-id: com.github.chipmuenk.pyFDA
runtime: org.kde.Platform
runtime-version: '5.12'
sdk: org.kde.Sdk
command: pyfdax
finish-args:
- "--socket=wayland"
- "--socket=x11"
- "--device=dri"
- "--filesystem=xdg-run/dconf"
- "--filesystem=~/.config/dconf:ro"
- "--talk-name=ca.desrt.dconf"
- "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
- "--own-name=com.github.chipmuenk.pyFDA"
- "--filesystem=home"
rename-icon: pyfda_icon #Image will renamed to match the app-id konvention
rename-appdata-file: pyFDA.appdata.xml
rename-desktop-file: pyFDA.desktop
modules: 
  - python3-modules.json # include dependencies

- name: pyFDA
  buildsystem: simple
  build-commands:
  - python3 setup.py install --prefix=/app
  - desktop-file-install --dir=/app/share/applications ressource/mime/applications/pyFDA.desktop
  - install -Dm755 ressource/pyFDA.appdata.xml /app/share/appdata/pyFDA.appdata.xml
  - install -Dm755 docs/source/img/pyfda_icon.png /app/share/icons/hicolor/100x100/apps/pyfda_icon.png
  - install -Dm755 docs/source/img/pyfda_icon.svg /app/share/icons/hicolor/scalable/apps/pyfda_icon.svg
  sources:
  - type: git
    branch: develop
    url: https://github.com/chipmuenk/pyFDA.git
