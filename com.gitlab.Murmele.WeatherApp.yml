app-id: com.gitlab.Murmele.WeatherApp
runtime: org.freedesktop.Platform
runtime-version: 22.08
sdk: org.freedesktop.Sdk
sdk-extensions:
    - org.freedesktop.Sdk.Extension.rust-stable

command: weatherapp
desktop-file-name-suffix: '' # used to create development version
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=network
  - --filesystem=home
  - --filesystem=/tmp # Needed to store temporary fetched files
  
rename-icon: weatherapp.png
rename-desktop-file: weatherapp.desktop
rename-appdata-file: weatherapp.appdata.xml
  
# TODO: why is this needed?
build-options:
    append-path: "/usr/lib/sdk/rust-stable/bin"
    build-args:
        - --share=network  # needed so that cargo is able to fetch dependencies

modules:
  - name: WeatherApp
    buildsystem: meson
    builddir: true
    sources:
      - type: git
        url: https://gitlab.com/Murmele/weatherapp.git
        branch: development
