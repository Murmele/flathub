app-id: com.gitlab.Murmele.UDPLogger
runtime: org.kde.Platform
runtime-version: 5.15-21.08
sdk: org.kde.Sdk
command: UDPLogger
rename-desktop-file: UDPLogger.desktop
rename-appdata-file: UDPLogger.appdata.xml
rename-icon: UDPLogger
finish-args:
- --socket=wayland
- --socket=fallback-x11
- --filesystem=home
- --share=network

modules:

- name: hdf5
  buildsystem: cmake
  builddir: true
  build-options:
  - "-DCMAKE_INSTALL_PREFIX=/app"
  - "-DCMAKE_BUILD_TYPE=Release"
  sources:
  - type: archive
    url: https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8/hdf5-1.8.20/src/hdf5-1.8.20.tar.bz2
    sha512: 288e4772a946d406de9096843c92dd6874a0753ed6fbe859aaadf565aa0509fc612ebdb00c301b7955bc0dc63e45f3a224c6b2638f480fe6738ee0c96a993c6e

- name: xlnt
  buildsystem: cmake
  sources:
  - type: git
    url: https://github.com/tfussell/xlnt
    # in version 1.5 a build error happens, because #include <limits> is missing there
    commit: fbae8cd6c12a2a060290fe6e7ad2d372f51f4869

- name: netcdf
  buildsystem: cmake
  build-options:
  - "-DCMAKE_INSTALL_PREFIX=/app"
  - "-DCMAKE_INSTALL_LIBDIR=lib"
  - "-DCMAKE_BUILD_TYPE=Release"
  - "-DENABLE_CDF5=ON"
  - "-DENABLE_DAP_LONG_TESTS=ON"
  - "-DENABLE_EXAMPLE_TESTS=ON"
  - "-DENABLE_EXTRA_TESTS=ON"
  - "-DENABLE_FAILING_TESTS=ON"
  - "-DENABLE_FILTER_TESTING=ON"
  - "-DENABLE_LARGE_FILE_TESTS=ON"
  sources:
  - type: git
    url: https://github.com/Unidata/netcdf-c.git
    tag: v4.6.1
    
- name: netcdf_c++4
  buildsystem: simple
  build-commands:
  - "./configure --prefix=/app"
  - 'make '
  - make install
  sources:
  - type: archive
    url: ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-cxx4-4.3.0.tar.gz
    sha256: e34fbc6aba243ec82c23e9ee99db2430555ada849c54c1f3ab081b0ddd0f5f30

- name: UDPLogger
  buildsystem: cmake
  build-commands:
  - desktop-file-install --dir=/app/share/applications res/linux/UDPLogger.desktop
  - install -Dm755 res/linux/UDPLogger.appdata.xml /app/share/metainfo/UDPLogger.appdata.xml
  - install -Dm755 res/icons/scalable/apps/UDPLogger.svg /app/share/icons/hicolor/scalable/apps/UDPLogger.svg
  - install -Dm755 res/icons/16x16/apps/UDPLogger.png /app/share/icons/hicolor/16x16/apps/UDPLogger.png
  - install -Dm755 res/icons/32x32/apps/UDPLogger.png /app/share/icons/hicolor/32x32/apps/UDPLogger.png
  - install -Dm755 res/icons/64x64/apps/UDPLogger.png /app/share/icons/hicolor/64x64/apps/UDPLogger.png
  - install -Dm755 res/icons/256x256/apps/UDPLogger.png /app/share/icons/hicolor/256x256/apps/UDPLogger.png
  sources:
  - type: git
    url: https://gitlab.com/Murmele/UDPLogger.git
    commit: 99e5fe8e3f6c23d0e1b62cc61baae5fd27da1b33
 
